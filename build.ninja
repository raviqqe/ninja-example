rule dep
  command = echo a.out: $in foo.h > $out

rule cc
  depfile = $out.d
  command = clang -o $out $in

build a.out.d: dep main.c
build a.out: cc main.c | a.out.d
